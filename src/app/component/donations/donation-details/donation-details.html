<div class="container">
  <h2>Detalle de donación</h2>

  @if (isLoading) {
    <p>Cargando datos de la donación...</p>
  } @else {

    @if (errorMessage) {

      <p>{{ errorMessage }}</p>
      <button (click)="goBack()">⬅ Volver al historial</button>

    } @else if (donation) {

      <section class="detail-card">

        <p><strong>ID donación:</strong> {{ donation.id }}</p>
        <p><strong>Usuario:</strong> {{ donation.userId }}</p>

        <!-- MONTO -->
        <p>
          <strong>Monto:</strong>
          {{ donation.amount | currency:'ARS':'symbol':'1.0-0' }}
        </p>

        <p><strong>Método de pago:</strong> {{ donation.method }}</p>

        <p>
          <strong>Fecha:</strong>
          {{ donation.date | date:'dd/MM/yyyy' }}
        </p>

        @if (donation.message) {
          <p><strong>Mensaje del donante:</strong></p>
          <p>"{{ donation.message }}"</p>
        }

        <!-- Mensaje extra si es transferencia -->
        @if (donation.method === 'Transferencia') {
          <p class="hint">
            Esta donación fue registrada como transferencia bancaria.
            Recordá verificar el comprobante correspondiente si es necesario.
          </p>
        }

      </section>

      <!-- =============================== -->
      <!--     COMPROBANTE DE TRANSFERENCIA -->
      <!-- =============================== -->

      @if (donation.method === 'Transferencia') {
        <div class="detalle-bloque">
          <h3>Comprobante de transferencia</h3>

          @if (donation.comprobanteUrl) {
            <div class="detalle-comprobante">
              <img
                [src]="donation.comprobanteUrl"
                alt="Comprobante de transferencia"
                class="detalle-comprobante-img"
              />

              <a
                [href]="donation.comprobanteUrl"
                target="_blank"
                rel="noopener noreferrer"
                class="btn-ver-comprobante"
              >
                Ver comprobante en otra pestaña
              </a>
            </div>
          } @else {
            <p class="detalle-comprobante-missing">
              No hay comprobante adjunto para esta donación.
            </p>
          }
        </div>
      }

      <!-- BOTÓN VOLVER -->
      <button type="button" class="btn-back" (click)="goBack()">
        ⬅ Volver al historial
      </button>

    }

  }

</div>

