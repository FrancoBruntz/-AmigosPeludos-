<section class="profile-card" *ngIf="form">
  <h2>Completar / Editar Perfil</h2>

  <form [formGroup]="form" (ngSubmit)="guardarCambios()">

    <!-- DNI -->
    <div class="row">
      <label>DNI</label>
      <input type="text" formControlName="dni" readonly>
      <div class="error-container"></div>
    </div>

    <!-- Nombre -->
    <div class="row">
      <label>Nombre</label>
      <input type="text" formControlName="nombre">
      <div class="error-container">
        @if (form.controls['nombre'].errors?.['required'] && form.controls['nombre'].touched) {
          <p class="error-msg">El nombre es obligatorio</p>
        }
      </div>
    </div>

    <!-- Apellido -->
    <div class="row">
      <label>Apellido</label>
      <input type="text" formControlName="apellido">
      <div class="error-container">
        @if (form.controls['apellido'].errors?.['required'] && form.controls['apellido'].touched) {
          <p class="error-msg">El apellido es obligatorio</p>
        }
      </div>
    </div>

    <!-- Email -->
    <div class="row">
      <label>Email</label>
      <input type="email" formControlName="email">
      <div class="error-container">
        @if (form.controls['email'].errors?.['required'] && form.controls['email'].touched) {
          <p class="error-msg">El email es obligatorio</p>
        }
        @if (form.controls['email'].errors?.['email'] && form.controls['email'].touched) {
          <p class="error-msg">Email inválido</p>
        }
      </div>
    </div>

    <!-- Teléfono -->
    <div class="row">
      <label>Teléfono</label>
      <input type="text" formControlName="telefono">
      <div class="error-container">
        @if (form.controls['telefono'].errors?.['required'] && form.controls['telefono'].touched) {
          <p class="error-msg">El teléfono es obligatorio</p>
        }
        @if (form.controls['telefono'].errors?.['pattern'] && form.controls['telefono'].touched) {
          <p class="error-msg">Ingrese un teléfono válido</p>
        }
      </div>
    </div>

    <!-- Dirección -->
    <div class="row">
      <label>Ciudad</label>
      <input type="text" formControlName="direccion">
      <div class="error-container">
        @if (form.controls['direccion'].errors?.['required'] && form.controls['direccion'].touched) {
          <p class="error-msg">La ciudad es obligatoria</p>
        }
      </div>
    </div>

    <div class="buttons">
      <button type="submit" [disabled]="form.invalid">Guardar Cambios</button>
    </div>

  </form>
</section>

<div *ngIf="!user()">
  <p>No hay usuario logueado. <a routerLink="/login">Iniciá sesión</a></p>
</div>
